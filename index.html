<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Ù„Ø¹Ø¨Ø© Ù‡Ø±Ù… Ø§Ù„Ø­Ø¸</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(135deg, #FFF9E6, #FFEDD5);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    .container {
      max-width: 1100px;
      width: 100%;
      position: relative;
    }
    .screen {
      display: none;
      text-align: center;
      padding: 60px 28px;
      background: #FFFBE6;
      border-radius: 17px;
      border: 8px solid #8B7355;
      margin: 18px auto;
      box-shadow: 0 15px 46px rgba(0,0,0,0.1);
      animation: slideIn 0.3s ease-out;
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .screen.active { display: block; }
    .logo-icon { font-size: 4em; margin-bottom: 15px; }
    .logo {
      font-size: 2.4em;
      font-weight: 700;
      color: #8B4513;
      text-shadow: 2px 2px 4px rgba(212, 165, 116, 0.5);
    }
    .subtitle {
      margin: 15px 0;
      background: rgba(245, 228, 191, 0.5);
      border-radius: 8px;
      font-size: 1.08em;
      padding: 13px 15px;
      color: #6B3410;
    }
    .input-group {
      margin: 22px 0;
      text-align: center;
    }
    .input-group label {
      display: block;
      margin-bottom: 10px;
      color: #8B4513;
      font-weight: 700;
      font-size: 1.1em;
    }
    .input-cells {
      display: flex;
      gap: 7px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .input-cell {
      width: 45px;
      height: 56px;
      font-size: 2em;
      text-align: center;
      border: 2px solid #D4A574;
      border-radius: 8px;
      background: #fffbe6;
      color: #8B4513;
      font-family: inherit;
      font-weight: bold;
      transition: all 0.3s ease;
    }
    .input-cell:focus {
      outline: none;
      border-color: #A0826D;
      box-shadow: 0 0 8px rgba(212, 165, 116, 0.45);
      background: #fff;
    }
    .btn {
      padding: 15px 30px;
      margin: 10px 5px;
      border-radius: 8px;
      border: 3px solid #8B4513;
      font-size: 1.1em;
      font-weight: 700;
      background: linear-gradient(135deg, #D4A574, #8B7355);
      color: #FFF8DC;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(139, 69, 19, 0.2);
    }
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(139, 69, 19, 0.35);
    }
    .btn:active { transform: translateY(-1px); }
    .btn-small {
      font-size: 0.95em;
      padding: 12px 20px;
      margin: 5px;
    }
    .admin-btn {
      background: linear-gradient(135deg, #B8860B, #8B6914);
    }
    .danger-btn {
      background: linear-gradient(135deg, #CD5C5C, #8B3A3A);
    }
    .game-title {
      font-size: 2.2em;
      color: #8B4513;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .user-code {
      font-size: 1.1em;
      margin: 11px 0;
      color: #6B3410;
      font-weight: 700;
      padding: 8px;
      background: rgba(246, 238, 190, 0.35);
      border-radius: 9px;
      display: inline-block;
    }
    .clock {
      font-size: 1em;
      background: #efe2c0;
      border-radius: 8px;
      padding: 7px 15px;
      display: inline-block;
      color: #8B4513;
      font-family: 'Courier New', monospace;
      font-weight: bold;
    }
    .balloons-container {
      margin: 25px auto;
      padding: 18px;
      background: #fffaee;
      border-radius: 13px;
    }
    .cards-row {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    .card {
      width: 120px;
      height: 150px;
      margin: 7px 3px;
      cursor: pointer;
      perspective: 900px;
    }
    .card-inner {
      width: 100%;
      height: 100%;
      position: relative;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    .card.pop .card-inner {
      animation: cardPop 0.6s ease-out forwards;
    }
    @keyframes cardPop {
      0% { transform: rotateY(0deg) scale(1); opacity: 1; }
      50% { transform: rotateY(180deg) scale(1.2); }
      100% { transform: rotateY(180deg) scale(0); opacity: 0; }
    }
    .card-face {
      width: 100%;
      height: 100%;
      position: absolute;
      border-radius: 12px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.15), 0 2px 5px rgba(0,0,0,0.05);
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.6em;
      font-weight: bold;
      border: 3px solid #A0826D;
    }
    .card-front {
      background: linear-gradient(135deg, #FFE4B5, #F5DEB3);
      color: #6B3410;
      overflow: hidden;
    }
    .card-front img {
      width: 90px;
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
      box-shadow: 0 2px 12px #FFD36E;
      background: #faf9e5;
    }
    .card-back {
      background: #fff;
      transform: rotateY(180deg);
      background-size: cover;
      background-position: center;
    }
    .admin-codes-list {
      background: rgba(250, 231, 205, 0.2);
      padding: 15px;
      border-radius: 8px;
      margin: 18px 0;
      text-align: right;
      border: 2px solid #D4A574;
      max-height: 390px;
      overflow-y: auto;
    }
    .admin-codes-list h3 {
      color: #8B4513;
      margin-bottom: 10px;
      font-weight: 700;
      font-size: 1.09em;
    }
    .codes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 9px;
    }
    .code-item {
      background: #fff;
      padding: 10px;
      border-radius: 8px;
      border: 2px solid #d4a574;
      font-family: 'Courier New', monospace;
      color: #8B4513;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      align-items: flex-end;
    }
    .code-top {
      display: flex;
      align-items: center;
      width: 100%;
      margin-bottom: 5px;
      justify-content: space-between;
      gap: 5px;
    }
    .code-text {
      font-weight: bold;
      font-size: 0.95em;
    }
    .copy-btn {
      background: #FFF8DC;
      border: 1px solid #8B7355;
      color: #8B4513;
      cursor: pointer;
      border-radius: 5px;
      font-size: 0.8em;
      padding: 2px 8px;
      transition: all 0.25s ease;
      font-weight: 600;
      white-space: nowrap;
    }
    .copy-btn:hover {
      background: #FFD36E;
    }
    .code-result {
      display: block;
      width: 100%;
      margin-top: 5px;
      font-size: 0.9em;
      padding: 6px;
      background: linear-gradient(135deg, #FFF9C4, #FFD54F);
      color: #8B4513;
      border-radius: 5px;
      font-weight: bold;
      box-shadow: 0 2px 12px rgba(255, 213, 79, 0.3);
      text-align: center;
      border: 1px solid rgba(255, 213, 79, 0.6);
    }
    .success {
      color: #06603b;
      font-weight: bold;
      margin-top: 13px;
      padding: 10px;
      background: #E8F5E9;
      border-radius: 8px;
    }
    .error {
      color: #ce2121;
      font-weight: bold;
      margin-top: 13px;
      padding: 10px;
      background: #FFEBEE;
      border-radius: 8px;
    }
    textarea {
      width: 100%;
      min-height: 100px;
      resize: vertical;
      font-family: 'Courier New', monospace;
      padding: 10px;
      border: 2px solid #D4A574;
      border-radius: 8px;
      color: #8B4513;
    }
    input[type="password"] {
      padding: 10px 15px;
      border: 2px solid #D4A574;
      border-radius: 8px;
      text-align: center;
      font-size: 1em;
      color: #8B4513;
      width: 200px;
    }
    .confetti {
      position: fixed;
      pointer-events: none;
      z-index: 999;
    }
    .result-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .result-modal.active { display: flex; }
    .result-box {
      background: linear-gradient(to bottom, #FFFBE6, #FFFACD);
      border-radius: 11px;
      border: 10px solid #8B7355;
      padding: 45px 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
      max-width: 430px;
      width: 97vw;
      text-align: center;
      margin: 0 auto;
      animation: popIn 0.4s ease-out;
    }
    @keyframes popIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }
    .result-title {
      font-size: 1.8em;
      font-weight: bold;
      margin-bottom: 15px;
    }
    .result-content {
      font-size: 1.3em;
      color: #8B4513;
      margin-bottom: 15px;
    }
    @media(max-width:900px) {
      .card { width: 90px; height: 120px; }
      .screen { padding: 35px 2vw; }
      .logo { font-size: 1.7em; }
    }
    @media(max-width:600px) {
      .card { width: 72px; height: 90px; }
      .input-cell { width: 31px; height: 42px; font-size: 1.5em; }
      body { padding: 6px; }
      .logo { font-size: 1.2em; }
      .screen { padding: 30px 15px; }
      .game-title { font-size: 1.5em; }
    }
  </style>
</head>
<body>
<div class="container">
  <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
  <div class="screen active" id="loginScreen">
    <div class="logo-icon">ğŸ”º</div>
    <div class="logo">Ù„Ø¹Ø¨Ø© Ù‡Ø±Ù… Ø§Ù„Ø­Ø¸</div>
    <div class="subtitle">Ø§Ø®ØªØ¨Ø± Ø­Ø¸Ùƒ ÙÙŠ Ù„Ø¹Ø¨Ø© Ø§Ù„Ù‡Ø±Ù… Ø§Ù„ÙØ±Ø¹ÙˆÙ†ÙŠØ© Ø§Ù„Ù…ØµØ±ÙŠØ©</div>
    <div style="font-size:1.2em;margin:14px 0;color:#8B4513;font-weight:600;">Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ù…Ø¯ Ø­Ù…Ø§Ø¯</div>
    <div class="input-group">
      <label>Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ (6 Ø£Ø±Ù‚Ø§Ù…)</label>
      <div class="input-cells" id="inputCells">
        <input class="input-cell" maxlength="1" inputmode="numeric">
        <input class="input-cell" maxlength="1" inputmode="numeric">
        <input class="input-cell" maxlength="1" inputmode="numeric">
        <input class="input-cell" maxlength="1" inputmode="numeric">
        <input class="input-cell" maxlength="1" inputmode="numeric">
        <input class="input-cell" maxlength="1" inputmode="numeric">
      </div>
      <div class="error" id="error"></div>
    </div>
    <button class="btn" onclick="appLogin()">ğŸ® Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
    <button class="btn admin-btn" onclick="appShowAdmin()">ğŸ”’ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
  </div>
  <!-- Ø´Ø§Ø´Ø© Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù† -->
  <div class="screen" id="adminLoginScreen">
    <div class="logo">ğŸ”’ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</div>
    <div class="subtitle">Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±</div>
    <div class="input-group">
      <input type="password" id="adminPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
      <div class="error" id="adminError"></div>
    </div>
    <button class="btn" onclick="appCheckAdmin()">Ø¯Ø®ÙˆÙ„</button>
    <button class="btn admin-btn" onclick="appBack()">Ø±Ø¬ÙˆØ¹</button>
  </div>
  <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© -->
  <div class="screen" id="adminScreen">
    <div class="logo">ğŸ”’ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©</div>
    <div class="admin-codes-list">
      <h3>Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ (<span id="codesCount">0</span>)</h3>
      <div class="codes-grid" id="currentCodesList"></div>
    </div>
    <div class="input-group">
      <label>Ø£Ø¯Ø®Ù„ Ø£ÙƒÙˆØ§Ø¯ Ø¬Ø¯ÙŠØ¯Ø© (6 Ø£Ø±Ù‚Ø§Ù… - Ø³Ø·Ø± Ù„ÙƒÙ„ ÙƒÙˆØ¯)</label>
      <textarea id="codesTextarea"></textarea>
    </div>
    <div>
      <button class="btn btn-small" onclick="appUpdateCodes()">ğŸ’¾ Ø­ÙØ¸</button>
      <button class="btn btn-small admin-btn" onclick="appGenerateCodes()">ğŸ² ØªÙˆÙ„ÙŠØ¯</button>
      <button class="btn btn-small danger-btn" onclick="appClearPrizes()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
      <button class="btn btn-small danger-btn" onclick="appBack()">âŒ Ø®Ø±ÙˆØ¬</button>
    </div>
    <div id="successMessage"></div>
  </div>
  <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
  <div class="screen" id="gameScreen">
    <div class="game-title">ğŸ¯ Ø§Ø®ØªØ± ÙˆØ§Ø­Ø¯Ø© Ù…Ù† Ø§Ù„ÙƒØ±ÙˆØª Ø§Ù„Ø¹Ø´Ø±Ø©</div>
    <div class="user-code">Ø±Ù…Ø²Ùƒ: <span id="displayCode"></span></div>
    <div class="clock" id="clock">00:00:00</div>
    <div class="balloons-container" id="balloonsContainer"></div>
  </div>
</div>
<!-- Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
<div class="result-modal" id="resultModal">
  <div class="result-box">
    <div class="result-title">ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! ğŸ‰</div>
    <div class="result-content" id="resultContent"></div>
    <button class="btn" onclick="appCloseResult()">Ø­Ø³Ù†Ø§Ù‹</button>
  </div>
</div>
<script>
  const ADMIN_PASS = '521988';
  const PRIZES = ['ğŸ¤ Ø³ÙŠØ´Ù† Ø­ØµØ±ÙŠ', 'ğŸµ Ø£ØºÙ†ÙŠØ©', 'ğŸ¤ğŸµ Ø³ÙŠØ´Ù† + Ø£ØºÙ†ÙŠØ©'];
  const SUITS = ['â™ ', 'â™¥', 'â™¦', 'â™£'];
  let currentCode = null;
  let gameActive = false;
  let codes = JSON.parse(localStorage.getItem('gameCodes')) || {};

  function saveCodes() {
    localStorage.setItem('gameCodes', JSON.stringify(codes));
  }
  function displayCodes() {
    const list = document.getElementById('currentCodesList');
    const countEl = document.getElementById('codesCount');
    const arr = Object.entries(codes);
    countEl.textContent = arr.length;
    list.innerHTML = '';
    if (arr.length === 0) {
      list.innerHTML = '<p style="color:#8B4513; text-align:center; padding:20px; grid-column:1/-1;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙƒÙˆØ§Ø¯</p>';
      return;
    }
    arr.forEach(([code, data]) => {
      const result = data.used ? (data.prize || 'Ù…Ø³ØªØ®Ø¯Ù…') : 'Ø¬Ø¯ÙŠØ¯';
      const item = document.createElement('div');
      item.className = 'code-item';
      let topDiv = document.createElement('div');
      topDiv.className = 'code-top';
      let codeSpan = document.createElement('span');
      codeSpan.className = 'code-text';
      codeSpan.textContent = code;
      let copyBtn = document.createElement('button');
      copyBtn.className = 'copy-btn';
      copyBtn.textContent = 'Ù†Ø³Ø®';
      copyBtn.onclick = (e) => {
        e.stopPropagation();
        navigator.clipboard.writeText(code);
        copyBtn.textContent = 'ØªÙ… âœ“';
        setTimeout(() => copyBtn.textContent = 'Ù†Ø³Ø®', 1500);
      };
      topDiv.appendChild(codeSpan);
      topDiv.appendChild(copyBtn);
      item.appendChild(topDiv);
      let resultSpan = document.createElement('span');
      resultSpan.className = 'code-result';
      resultSpan.textContent = result;
      item.appendChild(resultSpan);
      list.appendChild(item);
    });
  }
  function showMsg(text, type) {
    const el = document.getElementById('successMessage');
    el.innerHTML = `<div class="${type}">${text}</div>`;
    setTimeout(() => { el.innerHTML = ''; }, 2500);
  }
  function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }
  function clearInputCells() {
    document.querySelectorAll('.input-cell').forEach(cell => cell.value = '');
    document.getElementById('error').textContent = '';
  }
  window.appShowAdmin = function() {
    document.getElementById('adminPassword').value = '';
    document.getElementById('adminError').textContent = '';
    showScreen('adminLoginScreen');
  };
  window.appCheckAdmin = function() {
    const pass = document.getElementById('adminPassword').value;
    if (pass === ADMIN_PASS) {
      document.getElementById('adminError').textContent = '';
      displayCodes();
      showScreen('adminScreen');
    } else {
      document.getElementById('adminError').textContent = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
    }
  };
  window.appBack = function() {
    showScreen('loginScreen');
    clearInputCells();
  };
  window.appUpdateCodes = function() {
    const txt = document.getElementById('codesTextarea').value;
    const arr = txt.split('\n').map(c => c.trim()).filter(c => /^\d{6}$/.test(c));
    if (arr.length === 0) {
      showMsg('Ø£Ø¯Ø®Ù„ Ø£ÙƒÙˆØ§Ø¯ ØµØ­ÙŠØ­Ø© (6 Ø£Ø±Ù‚Ø§Ù…)', 'error');
      return;
    }
    const unique = [...new Set(arr)];
    if (unique.length !== arr.length) {
      showMsg('ØªÙˆØ¬Ø¯ Ø£ÙƒÙˆØ§Ø¯ Ù…ÙƒØ±Ø±Ø©', 'error');
      return;
    }
    unique.forEach(c => {
      if (!codes[c]) codes[c] = { used: false, prize: null };
    });
    saveCodes();
    displayCodes();
    document.getElementById('codesTextarea').value = '';
    showMsg(`ØªÙ… Ø­ÙØ¸ ${unique.length} ÙƒÙˆØ¯`, 'success');
  };
  window.appGenerateCodes = function() {
    for (let i = 0; i < 32; i++) {
      let code = String(Math.floor(Math.random() * 900000 + 100000));
      if (!codes[code]) codes[code] = { used: false, prize: null };
    }
    saveCodes();
    displayCodes();
    showMsg('ØªÙ… ØªÙˆÙ„ÙŠØ¯ 32 ÙƒÙˆØ¯ Ø¬Ø¯ÙŠØ¯', 'success');
  };
  window.appClearPrizes = function() {
    if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ÙØ¹Ù„Ø§Ù‹ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ØŸ')) {
      codes = {};
      saveCodes();
      displayCodes();
      showMsg('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£ÙƒÙˆØ§Ø¯', 'success');
    }
  };
  window.appLogin = function() {
    let cells = Array.from(document.querySelectorAll('.input-cell'));
    let inputCode = cells.map(c => c.value.trim()).join('');
    let err = document.getElementById('error');
    err.textContent = '';
    if (!/^\d{6}$/.test(inputCode)) {
      err.textContent = 'ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ 6 Ø£Ø±Ù‚Ø§Ù… Ø¨Ø§Ù„Ø¶Ø¨Ø·';
      return;
    }
    if (!codes[inputCode]) {
      err.textContent = 'Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯';
      return;
    }
    if (codes[inputCode].used) {
      err.textContent = 'Ø§Ù„Ø±Ù…Ø² Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ù‚Ø¨Ù„';
      return;
    }
    currentCode = inputCode;
    startGame();
  };
  function startGame() {
    showScreen('gameScreen');
    document.getElementById('displayCode').textContent = currentCode;
    renderCards();
    updateClock();
    setInterval(updateClock, 1000);
    gameActive = true;
  }
  function updateClock() {
    const n = new Date();
    document.getElementById('clock').textContent =
      String(n.getHours()).padStart(2, '0') + ':' +
      String(n.getMinutes()).padStart(2, '0') + ':' +
      String(n.getSeconds()).padStart(2, '0');
  }
  function renderCards() {
    const container = document.getElementById('balloonsContainer');
    container.innerHTML = '';
    const row = document.createElement('div');
    row.className = 'cards-row';
    for (let i = 0; i < 10; i++) {
      row.appendChild(createCard(i));
    }
    container.appendChild(row);
  }
  // -- ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„ÙƒØ±ÙˆØª ÙÙ‚Ø· Ù„ÙŠØ¹Ø±Ø¶ ØµÙˆØ± ÙØ±Ø¹ÙˆÙ†ÙŠØ© Ù„ÙƒÙ„ ÙƒØ§Ø±Øª --
  function createCard(idx) {
    const card = document.createElement('div');
    card.className = 'card';
    const images = [
      "https://upload.wikimedia.org/wikipedia/commons/f/f5/Tutankhamun_Egyptian_Museum.png",
      "https://upload.wikimedia.org/wikipedia/commons/7/73/Egyptian_sphinx.png",
      "https://upload.wikimedia.org/wikipedia/commons/c/c5/Nefertiti-bust.png",
      "https://upload.wikimedia.org/wikipedia/commons/9/94/Maspero_Egyptian_head.png",
      "https://upload.wikimedia.org/wikipedia/commons/9/99/AmenhotepIII_Statue.png",
      "https://upload.wikimedia.org/wikipedia/commons/b/b5/Mummy_of_Seti_I.png",
      "https://upload.wikimedia.org/wikipedia/commons/1/13/Horus%2C_Egyptian_God%2C_Museum.png",
      "https://upload.wikimedia.org/wikipedia/commons/d/d7/Anubis_head_Egyptian.png",
      "https://upload.wikimedia.org/wikipedia/commons/f/f4/Ramses_II_Statue.png",
      "https://upload.wikimedia.org/wikipedia/commons/8/82/Ancient_Egyptian_Pharaoh_Mask.png"
    ];
    card.innerHTML = `
      <div class="card-inner">
        <div class="card-face card-front">
          <img src="${images[idx]}" alt="Ø´Ø®ØµÙŠØ© ÙØ±Ø¹ÙˆÙ†ÙŠØ©">
        </div>
        <div class="card-face card-back">ğŸ˜€</div>
      </div>
    `;
    card.onclick = () => flip(card, idx);
    return card;
  }
  // -- Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ --
  function flip(el, idx) {
    if (!gameActive) return;
    gameActive = false;
    el.classList.add('pop');
    playSound();
    makeConfetti(el);
    setTimeout(getPrize, 700);
  }
  function getPrize() {
    const win = Math.random() * 100;
    let prize;
    if (win < 30) {
      prize = PRIZES[Math.floor(Math.random() * PRIZES.length)];
    } else {
      prize = 'ğŸš« Ù„Ù„Ø£Ø³Ù Ù„Ù… ØªØ­Ø§Ù„ÙÙƒ Ø§Ù„Ø­Ø¸';
    }
    codes[currentCode].used = true;
    codes[currentCode].prize = prize;
    saveCodes();
    showResult(prize);
  }
  function playSound() {
    try {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      osc.connect(gain);
      gain.connect(ctx.destination);
      osc.frequency.setValueAtTime(800, ctx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(100, ctx.currentTime + 0.1);
      gain.gain.setValueAtTime(0.3, ctx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);
      osc.start(ctx.currentTime);
      osc.stop(ctx.currentTime + 0.1);
    } catch(e) {}
  }
  function makeConfetti(el) {
    const r = el.getBoundingClientRect();
    const x = r.left + r.width / 2;
    const y = r.top + r.height / 2;
    for (let i = 0; i < 30; i++) {
      const conf = document.createElement('div');
      conf.className = 'confetti';
      conf.textContent = ['ğŸ‰', 'ğŸŠ', 'â­', 'âœ¨', 'ğŸ‘‘', 'ğŸ†'][i % 6];
      conf.style.left = x + 'px';
      conf.style.top = y + 'px';
      conf.style.fontSize = '1.8em';
      document.body.appendChild(conf);
      const angle = (Math.PI * 2 * i) / 30;
      const velocity = 7 + Math.random() * 5;
      let vx = Math.cos(angle) * velocity;
      let vy = Math.sin(angle) * velocity - 7;
      let px = x;
      let py = y;
      let vy2 = vy;
      const anim = () => {
        px += vx;
        py += vy2;
        vy2 += 0.2;
        conf.style.left = px + 'px';
        conf.style.top = py + 'px';
        conf.style.opacity = 1 - (py - y) / 300;
        if (py - y < 300) requestAnimationFrame(anim);
        else conf.remove();
      };
      anim();
    }
  }
  function showResult(prize) {
    const title = document.querySelector('.result-title');
    const content = document.getElementById('resultContent');
    if (prize.includes('Ù„Ù„Ø£Ø³Ù')) {
      title.innerHTML = 'ğŸ˜” Ù„Ù„Ø£Ø³Ù!';
      title.style.color = '#D4A574';
      content.innerHTML = prize;
    } else {
      title.innerHTML = 'ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! ğŸ‰';
      title.style.color = '#8B4513';
      content.innerHTML = prize;
    }
    document.getElementById('resultModal').classList.add('active');
  }
  window.appCloseResult = function() {
    document.getElementById('resultModal').classList.remove('active');
    showScreen('loginScreen');
    clearInputCells();
    currentCode = null;
    gameActive = false;
  };
  // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…
  document.addEventListener('DOMContentLoaded', function() {
    let cells = document.querySelectorAll('.input-cell');
    cells.forEach((cell, idx) => {
      cell.addEventListener('input', function() {
        if (this.value.length > 0 && idx < 5) {
          cells[idx + 1].focus();
        }
      });
      cell.addEventListener('keydown', function(e) {
        if ((e.key === 'Backspace' || e.key === 'Delete') && this.value === '' && idx > 0) {
          cells[idx - 1].focus();
        }
      });
      cell.addEventListener('paste', (e) => {
        const paste = (e.clipboardData || window.clipboardData).getData('text');
        if (/^\d{6}$/.test(paste)) {
          e.preventDefault();
          paste.split('').forEach((val, k) => {
            if (cells[k]) cells[k].value = val;
          });
          cells[5].focus();
        }
      });
    });
  });
</script>
</body>
</html>
